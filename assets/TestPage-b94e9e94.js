import{r as l,w as x,o as k,a as v,c as _,b as u,t as f,u as N,F as O,d as C,n as $,e as U,f as g,g as T,h as w,i as q,j as b}from"./index-11a562f6.js";const I={class:"test-timer"},F=u("span",null,"Время",-1),M={style:{"margin-left":"1rem",width:"3rem"}},V=u("span",null,":",-1),P={style:{width:"3rem"},class:"test-timer__text"},j={__name:"Timer",props:{isNewTest:{type:Boolean,required:!0}},emits:{"change-time":s=>typeof s=="number"?!0:(console.warn("Invalid change-time event payload!"),!1)},setup(s,{emit:n}){const t=s,e=l(0),a=l("00"),r=l("00");x(()=>t.isNewTest,()=>{t.isNewTest&&(e.value=0,a.value="00",r.value="00")});const o=setInterval(()=>{e.value+=1,e.value<10?r.value="0"+e.value:e.value<60&&(r.value=e.value),e.value/60>=1&&(a.value="0"+Math.trunc(e.value/60),e.value-Math.trunc(e.value/60)*60<10?r.value="0"+(e.value-Math.trunc(e.value/60)*60):r.value=e.value-Math.trunc(e.value/60)*60),n("change-time",e.value)},1e3);return k(()=>clearInterval(o)),(i,y)=>(v(),_("div",I,[F,u("div",M,f(a.value),1),V,u("div",P,f(r.value),1)]))}};const B={class:"test-main-random-text"},E={__name:"Test",props:{randomText:{type:String,required:!0}},emits:{"check-one-symbol":(s,n)=>typeof s=="number"&&typeof n=="number"?!0:(console.warn("Invalid change-time event payload!"),!1),"finish-test":null},setup(s,{emit:n}){const t=s;U(i=>({"10374f9e":o.value}));const e=l(0),a=l(!0),r=l(0),o=l("#fff");return N(document,"keypress",i=>{i.key===t.randomText[e.value]?(a.value=!0,e.value+=1,o.value="#fff",e.value===t.randomText.length&&n("finish-test")):(a.value=!1,r.value+=1,o.value="#ff0000"),n("check-one-symbol",e.value,r.value)}),(i,y)=>(v(),_("div",B,[(v(!0),_(O,null,C(t.randomText,(d,c)=>(v(),_("span",{key:d.id,style:{"white-space":"pre-wrap"},class:$({validSymbol:a.value&&c===e.value,unvalidSymbol:!a.value&&c===e.value,uncheckedSymbol:c>e.value,checkedSymbol:c<e.value})},f(d),3))),128))]))}};const z={class:"test-main-testing-params"},L=u("p",{class:"test-main-testing-params__item"},"Скорость",-1),A={class:"test-main-testing-params__item-value"},D=u("span",{style:{"font-size":"0.6em"}},"зн./мин",-1),R=u("p",{class:"test-main-testing-params__item"},"Точность",-1),X={class:"test-main-testing-params__item-value"},G=u("span",{style:{"font-size":"0.6em"}},"%",-1),H={__name:"TestingParams",props:{testingTime:{type:Number,required:!0},numderOfCheckedSymbols:{type:Number,required:!0},numberOfUnvalidSymbols:{type:Number,required:!0}},emits:{"start-new-test":null,"change-testing-params":(s,n)=>typeof s=="number"&&typeof n=="number"?!0:(console.warn("Invalid change-time event payload!"),!1)},setup(s,{emit:n}){const t=s,e=g(()=>t.testingTime?Math.trunc(t.numderOfCheckedSymbols/t.testingTime*60):0),a=g(()=>t.numderOfCheckedSymbols?t.numberOfUnvalidSymbols?100-Math.trunc(t.numberOfUnvalidSymbols/(t.numberOfUnvalidSymbols+t.numderOfCheckedSymbols)*100):100:0);x([e,a],()=>{n("change-testing-params",e.value,a.value)});const r=()=>{document.querySelector(".test-main-new-test-button").blur(),n("start-new-test")};return(o,i)=>(v(),_("div",z,[u("div",null,[L,u("p",A,[T(f(w(e))+" ",1),D]),R,u("p",X,[T(f(w(a))+" ",1),G])]),u("button",{class:"test-main-new-test-button",onClick:r}," Заново! ")]))}},S="Земля - пятая по величине планета Солнечной системы и единственная, имеющая слой газов в атмосфере, гарантирующий условия для существования здесь жизни. Около 70% поверхности планеты покрыто водой в жидком состоянии, необходимым элементом для существования форм жизни.",J=async()=>{try{const s=await fetch("https://fish-text.ru/get?&tipe=sentence&number=1"),n=await s.json();return s.ok?n.text:(console.log(n),S)}catch(s){return console.error(s.message),S}};const K={class:"test"},Q={class:"test__main"},Z={__name:"TestPage",setup(s){const n=q(),t=l(""),e=l(0),a=l(0),r=l(!0),o=l(0),i=l(0),y=l(0),d=async()=>{t.value=await J(),r.value=!0};d();const c=()=>{n.push({name:"result",query:{speed:`${i.value}`,accuracy:`${y.value}`}})};return(W,m)=>(v(),_("div",K,[b(j,{isNewTest:r.value,onChangeTime:m[0]||(m[0]=p=>{o.value=p,r.value=!1})},null,8,["isNewTest"]),u("main",Q,[b(E,{randomText:t.value,onCheckOneSymbol:m[1]||(m[1]=(p,h)=>{e.value=p,a.value=h}),onFinishTest:c},null,8,["randomText"]),b(H,{testingTime:o.value,numderOfCheckedSymbols:e.value,numberOfUnvalidSymbols:a.value,onStartNewTest:d,onChangeTestingParams:m[2]||(m[2]=(p,h)=>{i.value=p,y.value=h})},null,8,["testingTime","numderOfCheckedSymbols","numberOfUnvalidSymbols"])])]))}};export{Z as default};
